<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<title>Trade view</title>
<link rel="stylesheet" href="layout.css">
<head>
<body id="start">
<p>Hermes</p>
Welcome to pear trading!
<p>Please use Rabby Wallet</p>
<div id="auth">
Wallet Address: <input type="text" id="addresstext"/><p></p>
<button id="getEIP">Confirm this wallet</button>
<p id="wallet-test-outcome">Click the button below to login!</p>
<p id="invalid-address">&#128530 Maybe use a valid wallet address next time? Do you have multiple addresses? If the answer is yes, go back to your wallet and switch to the one in the input box above. &#128519</p>
<p id="sneaky-metamask">&#128545 Get that MetaMask out of here! Uninstall MetaMask (and any other wallets) from your browser extensions and use Rabby Wallet!</p>
<p id="cancel-signature">Into the &#128465 with that one! Let's try again, shall we?</p>
<p id="sign-in-error">Something went wrong. Are you signed in to your Rabby Wallet? Login and try again. &#128187</p>
</div>
<div id="code-wallet-signature">

</div>
 <div id="login">
    <p></p>
<button id="auth-login">Login with this wallet</button>
<p id="same-timestamp">&#9995 Hold it right there! You don't need to login twice!</p>
<p></p>

<div id="open-positions">
<p id="current-position">Positions:</p>

<script>
function showPositions(data){ // now make a loop that shows all information needed for positions
var i = 0;
console.log(data.length);

for(i=0; i<data.length; i++){
    document.getElementById("open-positions").innerHTML+=`<b id="position">${data[i].positionId}</b> `;

    document.getElementById("open-positions").innerHTML+=`Profit and Loss: $${data[i].unrealizedPnl.toFixed(2)}`;

    document.getElementById("open-positions").innerHTML+=` Entry Value: $${data[i].entryPositionValue.toFixed(2)}`;

    document.getElementById("open-positions").innerHTML+=` Current Value: $${data[i].positionValue.toFixed(2)}`;

    document.getElementById("open-positions").innerHTML+=` Long: `;
    // get all long assets
    for (var j = 0; j<data[i].longAssets.length; j++){

    document.getElementById("open-positions").innerHTML+=` ${data[i].longAssets[j].coin}`;    
    }
    if (data[i].longAssets.length==0){
        document.getElementById("open-positions").innerHTML+=` No long assets `;
    }    

    document.getElementById("open-positions").innerHTML+=` Short: `;
    // get all short assets
    for (var j = 0; j<data[i].shortAssets.length; j++){

    document.getElementById("open-positions").innerHTML+=` ${data[i].shortAssets[j].coin}`;    
    }
    if(data[i].shortAssets.length == 0){
        document.getElementById("open-positions").innerHTML+=` No short assets `;
    }

    document.getElementById("open-positions").innerHTML+= `<button onClick="closeEntirePos('${data[i].positionId}')">Close entire position</button>`;

    document.getElementById("open-positions").innerHTML+="<p><p>"// line break between positions
}

}
</script> 
</div>
<script type="module" src="script.js"></script>
<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
</body>
</head>
</html>